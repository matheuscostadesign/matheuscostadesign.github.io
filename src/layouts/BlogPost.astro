---
import BaseLayout from './BaseLayout.astro';
import type { CollectionEntry } from 'astro:content';

interface Props {
  post: CollectionEntry<'blog'>;
}

const { post } = Astro.props;
const { title, description, author, categories, image } = post.data;

const meses = [
  'Janeiro', 'Fevereiro', 'Mar√ßo', 'Abril', 'Maio', 'Junho',
  'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'
];

const date = new Date(post.id.substring(0, 10));
const dia = date.getDate().toString().padStart(2, '0');
const mes = meses[date.getMonth()];
const ano = date.getFullYear();
const dateString = `${dia} de ${mes} de ${ano}`;
---

<BaseLayout title={title} description={description} image={image}>
  {image && (
    <img class="w-full max-h-[50rem] object-cover block" src={image} alt={title} />
  )}
  
  <div class="bg-gray-700 py-24">
    <div class="w-full max-w-[110rem] mx-auto px-6">
      <h1 class="text-white text-[4.8rem] font-semibold leading-tight mb-10">{title}</h1>
      <div class="flex items-center gap-6 flex-wrap mb-10">
        <img class="w-20 h-20 rounded-full object-cover" src="/assets/matheus.jpg" alt={author} />
        <p class="text-text-primary m-0">Autor: {author}</p>
        <p class="text-text-primary m-0">Postado em: <time datetime={date.toISOString()}>{dateString}</time></p>
        <p class="text-text-primary m-0">Categoria: <span class="text-primary font-semibold">{categories}</span></p>
      </div>
      <hr class="border-none border-t border-gray-400 my-12" />
      <article>
        <slot />
      </article>
    </div>
  </div>
</BaseLayout>
